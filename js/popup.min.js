const popupMessageUs=document.querySelector(".modal-message"),popupOpenButton=document.querySelector(".address__button"),popupCloseButton=popupMessageUs.querySelector(".modal-message__close-button"),popupForm=popupMessageUs.querySelector(".modal-message__form"),popupUserName=popupMessageUs.querySelector("[name=popup-username]"),popupUserEmail=popupMessageUs.querySelector("[name=email]"),popupTextareaMessage=popupMessageUs.querySelector("[name=popup-message]");let isPopupStorageSupport=!0,popupStorage="";const alertErrMessage=function(e){alert(e)};try{popupStorage=localStorage.getItem("user-name"),popupStorage=localStorage.getItem("user-email")}catch(e){isPopupStorageSupport=!1}popupOpenButton.addEventListener("click",(function(e){e.preventDefault(),popupMessageUs.classList.add("modal-message_show"),popupStorage?(popupUserName.value=popupStorage,popupUserEmail.focus()):popupStorage?(popupUserEmail.value=popupStorage,popupTextareaMessage.focus()):popupUserName.focus()})),popupForm.addEventListener("submit",(function(e){popupUserName.value&&popupUserEmail.value&&popupTextareaMessage.value?isPopupStorageSupport&&(localStorage.setItem("user-name",popupUserName.value),localStorage.setItem("user-email",popupUserEmail.value)):(e.preventDefault(),popupMessageUs.classList.remove("modal-message_error"),popupMessageUs.offsetWidth=popupMessageUs.offsetWidth,popupMessageUs.classList.add("modal-message_error"),setTimeout(alertErrMessage,300,"Вы не заполнили обязательные поля!\nПеред отправкой сообщения, пожалуйста, заполните все поля."))})),popupCloseButton.addEventListener("click",(function(e){e.preventDefault(),popupMessageUs.classList.remove("modal-message_show"),popupMessageUs.classList.remove("modal-message_error")})),window.addEventListener("keydown",(function(e){"Escape"===e.key&&popupMessageUs.classList.contains("modal-message_show")&&(e.preventDefault(),popupMessageUs.classList.remove("modal-message_show"),popupMessageUs.classList.remove("modal-message_error"))}));